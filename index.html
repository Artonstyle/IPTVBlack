<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Black IPTV – Blue Neon 2026</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script type="text/javascript" src="$WEBAPIS/webapis/webapis.js"></script>

  <style>
    :root{
      --main-blue:#0045ff;
      --neon-cyan:#00d2ff;
      --glass-blue:rgba(0,50,150,.3);
      --fav-gold:#ffcc00;
      --muted: rgba(255,255,255,.45);
      /* Dynamische Variable für den Hintergrund */
      --dynamic-bg: radial-gradient(circle at top right,#001a4d,#00050a);
    }
    *{box-sizing:border-box;outline:none}
    body{
      width:1920px;height:1080px;margin:0;padding:0;
      background: var(--dynamic-bg);
      background-size: cover;
      background-position: center;
      color:white;font-family:'Segoe UI',Arial,sans-serif;overflow:hidden;
    }

    header{
      height:160px;padding:0 80px;
      display:flex;justify-content:space-between;align-items:center;
      border-bottom:1px solid rgba(0,210,255,.1);
    }
    .brand{font-size:50px;font-weight:900;letter-spacing:-1px}
    .brand span{color:var(--neon-cyan);font-style:italic}
    .header-right{display:flex;align-items:center;gap:40px}

    #menu{display:flex;gap:10px}
    .item{
      padding:15px 40px;font-size:32px;font-weight:bold;
      color:rgba(255,255,255,.4);border-radius:15px;transition:.25s;
    }
    .item.focused{
      color:white;background:var(--main-blue);
      box-shadow:0 0 35px rgba(0,69,255,.6);transform:scale(1.08);
    }

    .time-date-block{
      display:flex;flex-direction:column;align-items:flex-end;
      border-left:2px solid rgba(0,210,255,.2);padding-left:30px;
    }
    .clock-text{font-size:48px;font-weight:200;line-height:1}
    .date-text{font-size:16px;font-weight:800;color:var(--neon-cyan);letter-spacing:2px;margin-top:5px}

    main{display:flex;height:920px;padding:40px 60px;gap:40px}

    .column{
      background:var(--glass-blue);backdrop-filter:blur(10px);
      border-radius:30px;border:1px solid rgba(0,210,255,.2);
      display:flex;flex-direction:column;overflow:hidden;
    }
    .column-header{
      padding:25px;font-size:16px;font-weight:800;color:var(--neon-cyan);
      text-transform:uppercase;letter-spacing:4px;
    }

    /* Hintergrund Grid */
    .bg-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 20px; }
    .bg-btn { 
      padding: 15px; background: rgba(255,255,255,0.05); 
      border: 2px solid rgba(0,210,255,0.1); border-radius: 12px; 
      text-align: center; font-size: 18px; color: white;
    }
    .bg-btn.focused { border-color: var(--neon-cyan); background: var(--main-blue); }

    .setup-row{padding:18px 22px;border-top:1px solid rgba(0,210,255,.12)}
    .setup-label{color:var(--neon-cyan);font-weight:900;letter-spacing:2px;font-size:14px}
    .setup-val{font-size:26px;margin-top:6px}

    .input{
      width:100%; padding:16px 18px; font-size:22px;
      border-radius:14px; border:1px solid rgba(0,210,255,.25);
      background: rgba(0,0,0,.25); color:white;
    }
    .btn{
      display:inline-block; padding:14px 18px; font-size:20px;
      border-radius:14px; border:1px solid rgba(0,210,255,.35);
      background: rgba(0,69,255,.25); color:white; margin-top:12px;
    }
    .btn.focused{ background: var(--main-blue); box-shadow:0 0 22px rgba(0,69,255,.35); transform:scale(1.02); }
  </style>
</head>

<body onload="init()">
<header>
  <div class="brand">BLACK<span>IPTV</span></div>
  <div class="header-right">
    <nav id="menu">
      <div id="i0" class="item">TV</div>
      <div id="i1" class="item">FILME</div>
      <div id="i2" class="item">SERIEN</div>
      <div id="i3" class="item">SETUP</div>
    </nav>
    <div class="time-date-block">
      <div id="main-clock" class="clock-text">00:00</div>
      <div id="main-date" class="date-text">01. JAN 2026</div>
    </div>
  </div>
</header>

<main id="main-root">
  <div id="tv-view" style="display:flex; width:100%; justify-content:center; align-items:center;">TV Inhalte laden...</div>

  <div id="setup-view">
    <div class="column" style="width:520px">
      <div class="column-header">1) Design & Gerät</div>
      <div class="bg-grid">
        <div id="bg1" class="bg-btn">Galatasaray</div>
        <div id="bg2" class="bg-btn">Blue Neon</div>
        <div id="bg3" class="bg-btn">Dark Mode</div>
        <div id="bg4" class="bg-btn">Standard</div>
      </div>
      <div class="setup-row">
        <div class="setup-label">MAC-ADRESSE</div>
        <div id="mac-value" class="setup-val">Lade…</div>
      </div>
    </div>

    <div class="column" style="flex:1">
      <div class="column-header">2) M3U Playlist</div>
      <div class="setup-row">
        <input id="m3u-url" class="input" placeholder="https://..." />
        <div id="btn-save-m3u" class="btn">Speichern</div>
      </div>
    </div>
  </div>
</main>

<script>
  var area = "menu", menuIdx = 3, setupCol = 0, setupIdx = [0,0,0];
  var $ = function(id){ return document.getElementById(id); };

  // WICHTIG: Die Funktion zum Bildwechseln
  function changeBG(file) {
    // Falls "Standard", kein Bild nutzen
    if(file === "none") {
        document.body.style.setProperty('--dynamic-bg', "radial-gradient(circle at top right,#001a4d,#00050a)");
    } else {
        // Nutzt die RAW-URL von deinem GitHub
        const url = "https://raw.githubusercontent.com/Artonstyle/IPTVBlack/main/hintergrund/" + file;
        document.body.style.setProperty('--dynamic-bg', "radial-gradient(circle at top right, rgba(0,26,77,0.5), #00050a), url('" + url + "')");
    }
    localStorage.setItem("selected_bg", file);
  }

  function setupFocusables(col) {
    if(col === 0) return [
      { el: $("bg1"), file: "bild1.webp" },
      { el: $("bg2"), file: "bild2.webp" },
      { el: $("bg3"), file: "bild3.webp" },
      { el: $("bg4"), file: "none" }
    ];
    if(col === 1) return [{ el: $("m3u-url") }, { el: $("btn-save-m3u") }];
    return [];
  }

  function updateUI() {
    document.querySelectorAll(".item, .bg-btn, .btn, .input").forEach(e => e.classList.remove("focused"));
    if(area === "menu") {
      $("i" + menuIdx).classList.add("focused");
      $("setup-view").style.display = (menuIdx === 3) ? "flex" : "none";
    } else {
      var list = setupFocusables(setupCol);
      if(list[setupIdx[setupCol]]) list[setupIdx[setupCol]].el.classList.add("focused");
    }
  }

  window.addEventListener("keydown", function(e) {
    var k = e.keyCode;
    if(area === "menu") {
      if(k === 37 && menuIdx > 0) menuIdx--;
      if(k === 39 && menuIdx < 3) menuIdx++;
      if(k === 40 && menuIdx === 3) { area = "setup"; setupCol = 0; setupIdx = [0,0,0]; }
    } else {
      var list = setupFocusables(setupCol);
      if(k === 38) { // Hoch
        if(setupIdx[setupCol] > 0) setupIdx[setupCol]--;
        else area = "menu";
      }
      if(k === 40 && setupIdx[setupCol] < list.length - 1) setupIdx[setupCol]++; // Runter
      if(k === 37 && setupCol > 0) setupCol--; // Links
      if(k === 39 && setupCol < 1) setupCol++; // Rechts
      
      if(k === 13) { // OK
        var f = list[setupIdx[setupCol]];
        if(f.file) changeBG(f.file);
        else if(f.el.id === "btn-save-m3u") alert("URL Gespeichert");
      }
    }
    updateUI();
  });

  function init() {
    var saved = localStorage.getItem("selected_bg");
    if(saved) changeBG(saved);
    updateUI();
  }
</script>
</body>
</html>
